# baseURI: http://assembl.net/ns/core/
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix sioc: <http://rdfs.org/sioc/ns#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix oac: <http://www.openannotation.org/ns/> .
@prefix graph: <http://www.w3.org/2004/03/trix/rdfg-1/>.
@prefix dul: <http://www.loa-cnr.it/ontologies/DUL.owl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix assembl: <http://assembl.net/ns/core/> .

# Notes:
# Most of the existing messaging ontology (threads, posts, containers) is already described in SIOC. Use it.
# 
# Technically I expect we'll use tables for the posts. The automatic exposition as RDF in virtuoso may be good.
# But I don't know if we can extend SuRF to sometimes use SQLAlchemy objects, sometimes use SuRF objects...

# from foaf

# foaf:Agent a owl:Class .
# foaf:Document a owl:Class .
# foaf:OnlineAccount a owl:Class .
# foaf:Project a owl:Class .
# foaf:Person a owl:Class ; 
# 	rdfs:subClassOf <http://www.w3.org/2000/10/swap/pim/contact#Person>,
# 	<http://www.w3.org/2003/01/geo/wgs84_pos#SpatialThing>,
# 	foaf:Agent .
# foaf:Group a owl:Class ; rdfs:subClassOf foaf:Agent .
# foaf:account a owl:ObjectProperty .
# foaf:depiction a owl:ObjectProperty .
# foaf:topic a owl:ObjectProperty ;
#     rdfs:domain foaf:Document ;
#     rdfs:range owl:Thing ;
#     owl:inverseOf foaf:page .
# foaf:primaryTopic a owl:FunctionalProperty;
#     rdfs:domain foaf:Document ;
#     rdfs:range owl:Thing.

# from SiOC

#sioc:Community a owl:Class .
#sioc:Container a owl:Class .
#sioc:Forum a owl:Class ; rdfs:subClassOf sioc:Container .
#sioc:Item a owl:Class .
#sioc:Post a owl:Class ; rdfs:subClassOf sioc:Item, foaf:Document .
#sioc:Role a owl:Class .
#sioc:Site a owl:Class ; rdfs:subClassOf sioc:Space .
#sioc:Space a owl:Class .
#sioc:Thread a owl:Class ; rdfs:subClassOf sioc:Container .
#sioc:UserAccount a owl:Class ; rdfs:subClassOf foaf:OnlineAccount .
#sioc:Usergroup a owl:Class .

#sioc:embeds_knowledge
#    a owl:ObjectProperty ;
#    rdfs:domain sioc:Item ;
#    rdfs:range graph:Graph .

# assembl starts here

<http://assembl.net/ns/core/>
    dcterms:description """Notion of assembly, with its phases and forums. Documents, excerpts and concepts."""@en ;
    dcterms:title "Assembl Core Ontology Namespace"@en ;
    a owl:Ontology, owl:Thing .


assembl:Document a owl:Class;
	owl:subClassOf sioc:Item, oac:Target, foaf:Document.

assembl:Post a owl:Class; owl:subClassOf sioc:Post, assembl:Document.

assembl:MutableDocument a owl:Class;
	rdfs:comment "Documents whose content can change."@en ;
	rdfs:subClassOf assembl:Document . # not at all sure about that subclass

assembl:VersionableDocument a owl:Class;
	rdfs:comment "Mutable documents with named versions."@en ;
	rdfs:subClassOf assembl:MutableDocument .

assembl:Snapshot a owl:Class;
	rdfs:subClassOf assembl:Document.

assembl:snapshotOf a owl:ObjectProperty;
	rdfs:domain assembl:Snapshot;
	rdfs:range assembl:MutableDocument.

assembl:NamedSnapshot a owl:Class;
	rdfs:subClassOf assembl:Snapshot.

assembl:NamedSnapshotOf a owl:ObjectProperty;
	rdfs:subPropertyOf assembl:snapshotOf;
	rdfs:range assembl:VersionableDocument.

assembl:snapshotVersion a owl:ObjectProperty;
	rdfs:domain assembl:NamedSnapshot;
	rdfs:range rdfs:Literal.

assembl:snapshotTime a owl:ObjectProperty;
	rdfs:domain assembl:Snapshot;
	rdfs:range xsd:dateTime.

assembl:Excerpt a owl:Class;
	rdfs:comment "A fragment of an item or document."@en;
	rdfs:subClassOf oac:Annotation.

assembl:DocumentFragment a owl:Class;
	rdfs:subClassOf assembl:Document, oac:ConstrainedTarget .

assembl:excerptTarget a owl:ObjectProperty;
	rdfs:subPropertyOf oac:hasTarget;
	rdfs:domain assembl:Excerpt;
	rdfs:range assembl:DocumentFragment .

assembl:fragmentText a owl:FunctionalProperty;
	rdfs:domain assembl:DocumentFragment;
	rdfs:range rdfs:Literal, xsd:string .


assembl:Concept a owl:Class;
	rdfs:subClassOf owl:Thing , dul:Entity.

assembl:definitionExcerpt a owl:ObjectProperty;
	rdfs:domain assembl:Concept;
	rdfs:range assembl:Excerpt .

assembl:definition a owl:ObjectProperty;
	rdfs:subPropertyOf dcterms:description .

# sigh. owl:propertyChain is an OWL2 construct. 
# I am saying: infer assembl:definition when you see that chain.
[] rdfs:subPropertyOf assembl:definition;
   owl:propertyChain (
     assembl:definitionExcerpt
     assembl:excerptTarget
     assembl:fragmentText
     ).

assembl:shortExcerpt a owl:ObjectProperty;
	rdfs:subPropertyOf assembl:definitionExcerpt .

assembl:ActiveDocument a owl:Class;
	rdfs:comment "A mutable document controlled by Assembl."@en ;
	rdfs:subClassOf assembl:Document, assembl:VersionableDocument .

assembl:conceptDocument a owl:ObjectProperty;
	rdfs:range assembl:Concept;
	rdfs:domain assembl:ActiveDocument.

assembl:excerptOf a owl:ObjectProperty;
	rdfs:range assembl:Excerpt;
	rdfs:domain assembl:Concept.

assembl:obsoleteExcerptOf a owl:ObjectProperty;
	rdfs:subPropertyOf assembl:excerptOf.

assembl:Viewpoint a owl:Class;
	rdfs:subClassOf graph:Graph, sioc:Container.

assembl:AssemblySpace a owl:Class;
	rdfs:subClassOf graph:Graph, sioc:Container.

assembl:AssemblyPhase a owl:Class;
	rdfs:subClassOf assembl:AssemblySpace.

assembl:Assembly a owl:Class;
	rdfs:subClassOf assembl:AssemblySpace.

assembl:AssemblyForum a owl:Class;
	rdfs:subClassOf sioc:Forum.

assembl:has_forum a owl:FunctionalProperty;
	rdfs:domain assembl:AssemblySpace;
	rdfs:range assembl:AssemblyForum.

assembl:moderator_of a owl:ObjectProperty ;
    rdfs:domain sioc:UserAccount ;
    rdfs:range assembl:AssemblySpace .

assembl:forum_moderator_of a owl:ObjectProperty ;
    rdfs:subPropertyOf sioc:moderator_of;
   	owl:propertyChain (
    	assembl:moderator_of
     	assembl:has_forum
    ).

assembl:Vote a owl:Class.

assembl:voter a owl:FunctionalProperty;
	rdfs:domain assembl:Vote;
	rdfs:range sioc:UserAccount.

assembl:vote_on a owl:FunctionalProperty;
	rdfs:domain assembl:Vote;
	rdfs:range assembl:Concept.

assembl:VoteValence a owl:Class;
	rdfs:subClassOf skos:Concept .

assembl:has_valence a owl:FunctionalProperty;
	rdfs:domain assembl:Vote;
	rdfs:range assembl:VoteValence .
